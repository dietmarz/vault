include::{root}/.inc/include.adoc[]

= Ein Release bauen

link:deploy.adoc[deployen]
link:featurebranch.adoc[]


* unter awx -> Resources -> Templates: "Release Job" -> Launch button
  ** Repo, branch wählen
  ** Als qualifier -knomp27747v1 dann wird zB Version 17.1.0-knomp27747v1 gebaut
  ** Build Mode: fast, dann wird kein coverage ausgeführt
  ** Bei `esp-rest-apis` muss noch das modul angegeben werden, welches released werden soll!
  ** Vergiss nicht, die Version im Yaml file zu erhöhen, das passiert nicht automatisch.

* unter gitlab
  ** esp-tms-knie4 repository auswählen, dann erscheint links das menu
  ** CI/CD->Jobs, in der Zeile kann man navigieren zum Commit
  ** interessant: unter Pipeline der Link kann man sich alle Steps anschauen

Wenn alles grün wird, legt gitlab die Version an und erzeugt eine neue 17.1.1-SNAPSHOT version.

* Sicher interessiert sich jemand für das Release und muss in Mattermost informiert werden.
  ** zB esp-knomp-21294-unlink-shipment

* Wann Was deployed wird:
  ** https://wiki.int.kn/pages/viewpage.action?spaceKey=KNESP&title=Next+Steps+on+the+Release+Policy
* Wer wann deployed, der ist auch für Deployment zuständig
  ** https://wiki.int.kn/display/KNESP/Deployment+Team

* Kontrolle Upload in Nexus:
  ** Im Repository wird ein Tag hinzugefügt ((tag: 7.0.0-knomp21294v1) und zwei Jenkins commits sichtbar
  ** Im Nexus erscheint das Artifact
  ** Links Browse -> esp auswählen -> kn->knlogin->esp....


