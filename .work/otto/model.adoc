include::/home/dietmar/cloud/Notes/asciidoc/work/inc/templateInclude.adoc

:img-dir: /home/dietmar/cloud/Notes/asciidoc/work/doc/kh/img

= Übersicht


== Abbildungen
* Vererbung = inheritance: `attributeContext.relatedContextId` zeigt auf Parent
* Zuweisung = association: `attributeContext.associateAttributes[n].attributeId` zeigt auf `attributDefinition._id`
* KSK       = CSC        : `attributeContext.associateAttributes[n].attributeProperties` mit non-null values selektiv
* PBKs `attributeValue` in Plural, PTypen in singular
* PBK hat keine `relatedContextId` = Kennzeichen für Root-Element
* Produkttyp hat `attributeContext.attributId` zeigt auf `attributeDefinition._id` mit `commKey == "category"`, dort gilt auch:
  ** `attributeDefinition.attributeProperties.values.contains( attributContext.attributeValue )`
* Bei der PBK zeigt der commKey auf eine definition mit `commKey == "category-group"`
* Das sind die beiden strukturgebenden Merkmale, commKey == category und category-group

* Origin sagt aus welchem Context geerbt worden ist, nie leer, alle quellen 


D.h. 
Die Attribute (Merkmale) eines Contextes sind:
Die Root associated Attributes (der PBK), modifiziert mit den Root-KSK 
plus 
Den eigenen associated Attributes (der PT), modifiziet mit den PT-KSK, die alles überschreiben. Wenn man zwei Ebenen hat,
bei mehr Ebenen nach dem gleichen Schema wiederholen.

* Ein PT zeigt per relatedContextId auf die PBK
* Wenn in der Liste `associatedAttributes`
  ** Eintrag der Liste hat nur `attributeId` -> wird im Standard verwendet
  ** Eintrag der Liste hat zusätzlich `attributeProperties` -> erweitert Standard mit Kontext Spezifischer Konfiguration
* Die Strukturgebenden Merkmale ermöglichen eine Navigation in N facher Tiefe, 
  ** die momentan 2 beträgt und bei der auf PT Ebene keine Zuweisungen stattfinden.
  ** Man kann jeder Ebene einen Namen geben.


=== Structures
* fertig, flach ausgerollte Merkmale
* Ergeben fertige Merkmalsstrukturen:  2 Ebenenen Inheritance + 2 Ebenen KSK aufgelöst 
* Kontexte spezifische Überschreibungen:
  ** zB. Hose.Farbe(-alle-) Jeans.Farbe(Blau)
  ** Schränkt die Auswahl immer ein!

=== Taxonomy Tree
* Beinhaltet nur die Struktur, keine Definitionen (Merkmale)
* `contextTreeNode.contextDefinitionId` zeigt auf `attributeContext._id`
* `contextTreeNode.attributeCommKey` = `category` oder `category-group`
* 

== Session mit Malte

image::{img-dir}/attribut-schema.png[]

=== Rechter OPAL Teil
* Stellt die OPAL Seite dar, die importiert wird.
* Die PBKs beihalten (nicht referenzieren) die Merkmale

=== Mittlerer Prime Context Teil
* Bildet die Hierarchie ab
* Nutzt Referenzen auf Merkmale, PBK und PT

=== Linker Prime Merkmals Teil
* Merkmale in flacher Hierarchie bis auf:
* Zwei dick umrandeten Merkmale, die Co

=== Struture
* Flach ausgerollte PBK

* fachlies Datenmodell
* commKey is unique
* Context verbindet Culotte mit Hose

